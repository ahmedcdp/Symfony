

{% extends "CDPBookingBundle::layout.html.twig" %}

{% block body %}

<h3>Récapitulatif</h3>
    <div>
        {# On affiche tous les messages flash dont le nom est « info » #}
        {% for message in app.session.flashbag.get('notice') %}
            <div class="flash-notice">
                {{ message }}
            </div>
        {% endfor %}
    </div>

<div class="well">

  <div>
  	<p>Prix total : {{ ticket.prixTotal}}eurs</p> 
    <p>Date de r&eacute;servation : {{ ticket.date|date('d-m-Y') }}</p>
    <p>Email : {{ ticket.email}}</p>
    {% if ticket.halfday %}
     <p>Type de billet : demi-journ&eacute;e</p> 
    {% else %}
      <p>Type de billet : journ&eacute;e compl&egrave;te</p>
    {% endif %}
    <p>Nombre de personnes : {{ ticket.number}}</p>
    {% set index = 1 %}
     {% for visitor in ticket.visitors %}
     	<h3>Visiteur{{index}}</h3>
        <p>Nom : {{ visitor.firstname}}</p> 
    	<p>prenom : {{ visitor.lastname}}</p> 
    	<hr>
    	{% set index = index+1 %}
    {% endfor %}
      {% set prix = ticket.prixTotal * 100 %}
  </div>
</div>

    <div id="status">


        <form action="{{ path('cdp_booking_save') }}" method="POST">
            <script
                    src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                    data-key="pk_test_0BHLlO0kypTdeYuLgb4eRVpj"
                    data-amount="{{ prix}}"
                    data-label="Payer"
                    data-name="Stripe"
                    data-description=""
                    data-image="https://stripe.com/img/documentation/checkout/marketplace.png"
                    data-locale="auto"
                    data-email="{{ ticket.email}}"
                    data-zip-code="false"
                    data-currency="eur">
            </script>
        </form>
    </div>

{% endblock %}